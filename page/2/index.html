<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>殇花 - 殇花思密达</title><meta name="keywords" content="Java,Spring,殇花,博客,殇花的博客,SpringBoot,Mybatis,殇花思密达,殇花blog"><meta name="author" content="殇 花"><meta name="copyright" content="殇 花"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="殇花的博客">
<meta property="og:type" content="website">
<meta property="og:title" content="殇花">
<meta property="og:url" content="https://www.shanghua.live/page/2/index.html">
<meta property="og:site_name" content="殇花">
<meta property="og:description" content="殇花的博客">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://q1.qlogo.cn/g?b=qq&s=100&nk=2621197736">
<meta property="article:author" content="殇 花">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="Spring">
<meta property="article:tag" content="殇花">
<meta property="article:tag" content="博客">
<meta property="article:tag" content="殇花的博客">
<meta property="article:tag" content="SpringBoot">
<meta property="article:tag" content="Mybatis">
<meta property="article:tag" content="殇花思密达">
<meta property="article:tag" content="殇花blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://q1.qlogo.cn/g?b=qq&s=100&nk=2621197736"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://www.shanghua.live/page/2/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="6PW-x4aRyYD-tihKNxcr_F1iIGlC1BHIifdmXsH1LGw"/><meta name="baidu-site-verification" content="code-2N59lZbwHm"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.js" defer></script><script async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: 'ca-pub-2452196147037855',
  enable_page_level_ads: 'true'
});</script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?2dd0339c07639d98a79b1c63cb6550c7";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"11NR0ITYKM","apiKey":"f76bf5692d22d6db655bfca29b14b35e","indexName":"blog","hits":{"per_page":6},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '殇花',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2021-07-12 08:56:50'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><meta name="generator" content="Hexo 5.4.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="https://q1.qlogo.cn/g?b=qq&amp;s=100&amp;nk=2621197736" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">52</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">16</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">殇花</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">殇花</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/shanghua521" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:shanghua714@gmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2021/07/01/%E8%AE%A1%E7%BD%91/%E7%BC%93%E5%86%B2%E5%8C%BAflip/" title="缓冲区 flip">缓冲区 flip</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-07-01T13:03:27.000Z" title="发表于 2021-07-01 13:03:27">2021-07-01</time></span></div><div class="content">缓冲区的 flip在计算机中，数据往往会被抽象陈流，然后传输。比如读取一个文件，数据会被抽象成文件流；播放一个视频，视频被抽象成视频流，处理节点为了防止过载，又会使用缓冲区削峰（减少瞬间压力）在传输协议中，应用往往先把数据放入缓冲区，然后再将缓冲区通过给发送数据的程序，发送数据的程序从缓冲区读取数据，然后进行发送。
流代表数据，具体来说是随着时间产生的数据，类比自然界的河流读取文件的时候，文件被抽象成流流的内部构造，决定了你每次能从文件中读取多少数据，从流中读取数据的操作，本质上是一种迭代器流的内部构造决定了迭代器每次能读取的数据规模
为什么需要缓冲区因为从文件读取数据这个操作，是一次磁盘的 I/O 操作，非常耗时。内核从文件系统读取到的数据是确定的，但里面的有效数据是不确定的。而无论读取打一个字节还是读取对个字节，都应该适配内核的底层行为，也就是说，每次流对象读取一个字节，内核可能会读取 2k、4k 的数据。这样的行为才能真的做到减少磁盘I/O 操作
哪为什么不直接读取几兆或者更大的数据呢？ 两个原因

如果是高并发场景下，并发读取数据时内存使用是根据并发数翻倍的，如果同时读取的数据 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2021/06/30/%E8%AE%A1%E7%BD%91/EPoll/" title="EPoll 红黑树">EPoll 红黑树</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-06-29T17:16:25.000Z" title="发表于 2021-06-29 17:16:25">2021-06-29</time></span></div><div class="content">Socket 是什么flowchart TB
    subgraph one
    客户端 &lt;--&gt; Socket对象1
    end
    subgraph two
    服务端 &lt;--&gt; Socket对象2
    end
    Socket对象1 &lt;--&gt; three
    Socket对象2 &lt;--&gt; three
    subgraph three
    TCP&#x2F;IP
    end

Socket 是一种文件，准确的来说是一种双线管道文件

管道文件：管道会将一个程序的输入，导向另一个程序的输入
双向管道文件：双向管道文件连接的程序是对等的，都可以作为输入和输出 

服务端程序
12var serverSocket = new ServerSocket();serverSocket.bind(new InetSocketAddress(80));

这里看起来是我们创建的是一个服务端 Socket 对象，但单纯看这个对象，它代表着什么呢？如果从管道文件来理解，就容易些

其一，这是一个文件
其二，它里 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2021/06/29/%E8%AE%A1%E7%BD%91/JavaUDPSocket/" title="Java UDP Socket">Java UDP Socket</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-06-29T12:42:45.000Z" title="发表于 2021-06-29 12:42:45">2021-06-29</time></span></div><div class="content">Java 创建 UDP socket创建 UDP ServerHello我们可以用 Java 中的 DatagramSocket 创建一个 UDP Server
1234567891011121314151617181920212223public class UdpEchoServer &#123;    // 端口号    private static final int port = 8421;    public static void main(String[] args) throws IOException &#123;        // 创建 UDP socket        DatagramSocket socket = new DatagramSocket(port);        while (true) &#123;            // 创建数据包            DatagramPacket packet = new DatagramPacket(new byte[512], 512);            // 接受数据         ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2021/06/27/%E8%AE%A1%E7%BD%91/%E6%95%B0%E6%8D%AE%E5%8C%85%E6%8A%93%E5%8C%85/" title="数据包抓包">数据包抓包</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-06-27T15:09:52.000Z" title="发表于 2021-06-27 15:09:52">2021-06-27</time></span></div><div class="content">WiresharkWireshark 是世界上应用最广泛的网络协议分析器，它让我们在微观层面上看到整个网络正在发生的事情。可以去 Wireshark 官网下载 Wireshark 官网
Wireshark 具有丰富的功能集

深入检查数百个协议，并不断添加更多协议
事实捕捉和离线分析
支持 Windows、Linux、MacOs、Solaris、等多种操作系统
提供 GPU 浏览、也可以通过 TTY
支持 VOIP
支持 Gzip
支持 IPSec 

打开 WiresharkLinux 打开 Wireshark 如下界面

这里列出了电脑的网卡，你可以选择抓包的网卡，这里我的电脑是有限上网，所以选择 enp1s0，点击后会进入捕获页面

在这里可以看到非常多的数据包，有发送的，以及接受的数据包。页面没列以此是

序号（No）是 Wireshark 分配的一个从捕获开始的编号
时间（Time）是从捕获开始过去的时间戳，可以从在上方菜单栏 视图 -&gt; 时间显示格式 修改显示的格式
源地址和目标地址（Source 和 Destination）是 IP 协议，注意这里有 IPv6 的地 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2021/06/27/%E8%AE%A1%E7%BD%91/%E5%B1%80%E5%9F%9F%E7%BD%91NAT/" title="计算机网络入门 局域网-NAT">计算机网络入门 局域网-NAT</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-06-27T13:47:14.000Z" title="发表于 2021-06-27 13:47:14">2021-06-27</time></span></div><div class="content">NAT 是如何工作的当一个公司申请到一个公网 IP，会在公司内部设置一个局域网，这个局域网中通常 IP 地址，会以 192.168 开头当一个员工使用 UDP 协议发送信息向王者荣耀服务器，可是员工的 IP 地址是一个内网 IP，数据到王者荣耀服务器可以通过寻址和路由找到目的地但是数据从王者荣耀服务器回来的时候，王者荣耀服务器如何知道 192.168 开头的地址应该如何寻址呢？ 
局域网数据交换（MAC 地址）设备间通讯的本质：设备拥有的网络接口（网卡）间的通信
为了区别每个网络接口，互联网工程任务组（IETF）要求每个设备拥有一个唯一的编号 MAC 地址

IP 地址不是唯一的吗?并不是的，如果你将电脑搬到另一个城市 IP 地址就会改变，电脑网卡的 MAC 地址不会发生变化数据交换，必须经过交换机，毕竟线路是由网卡连接交换机的

数据发送方将本身的 MAC 地址，以及目的地的 MAC 地址，Frame 或者封包，发送给交换机，交换机根据地址转发给目的地或者目的地的网卡这个 Frame，并不是 IP 协议的分组链路层的数据交换，支持 IP 协议工作，是网络层的底层如果 IP 协议要传输 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2021/06/24/%E8%AE%A1%E7%BD%91/IP%E5%8D%8F%E8%AE%AE/" title="IPv4 协议">IPv4 协议</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-06-23T17:37:43.000Z" title="发表于 2021-06-23 17:37:43">2021-06-23</time></span></div><div class="content">什么是 IP 协议IP 协议，是一个处于垄断地位的网络层协议，IPv4 就是 IP 协议的地 4 个版本，是目前互联网的主要网络层协议IPv4 是目前互联网的主要网络层协议。IPv4 为传输层提供 Host-To-Host 的能力，IPv4 需要底层数据链路层的支持IP 协议并不负责数据的可靠性，传输数据时，IP 协议还会对数据进一步拆分。进行两次拆分是为了适配底层的设备
可靠性是要保证数据无损传输到目的地，是由 IP 协议上方，Host-To-Host 协议保证了，TCP 通过应答机制，窗口等保证IP 协议自身不能保证可靠性。比如 IP 协议可能面临下面几个问题

封包损坏（数据传输过程中被损坏）
丢包（数据发送过程中丢失）
重发（数据被重发，比如中间设备通过 2 个路径传递数据）
乱序（到达目的地时数据与发送数据不一致）

IP 协议并不会去处理这些问题，因为网络层只专注解决网络层的问题，而且不同特性的应用在不同场景下需要解决的问题不一样对于网络层，有三个问题需要解决

延迟
吞吐量
丢包率

IP 协议的工作原理IP 协议接受 IP 协议上方的 Host-To-Host 协议来传 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2021/06/24/%E8%AE%A1%E7%BD%91/IPv6%E5%8D%8F%E8%AE%AE/" title="IPv6 协议">IPv6 协议</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-06-23T17:37:43.000Z" title="发表于 2021-06-23 17:37:43">2021-06-23</time></span></div><div class="content">IPv4 用 32 位整数描述地址，最多支持 43 亿设备，显然不够用


可以拆分子网来解决 IPv4 不够用的问题，内外网数据交互，需要网络地址转换协议（NAT 协议），增加传输成本多级网络会增加数据的路由和传输链路，降低网络的速度
IPv62019 年据中国互联网络中心（CNNIC）统计，IPv6 协议目前在我国普及率 60%，已经位居时间首位
什么是 Tunnel 技术
IPv4 与 IPv6 相似点

IPv6：切片（Segmentation）、增加封包头、路由（寻址）
IPv6：接受上方主机到主机（Host-To-Host）协议传递来的数据
最核心的能力：确保数据可以从发送主机到达接收主机


不相同点

IPv4地址是 4 个 8 位（octeat），共 32 位
IPv6 8 个 16 位（hextet），共 128 位
IPv4 使用 . 点分割 如 103.28.7.35
IPv6 使用 : 冒号分割 0123:4567:89ab:cdef:0123:4567:89ab:cdef



也可以省略前 64 字节简写为 0123:4567::0123:4567:000 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2021/06/23/%E8%AE%A1%E7%BD%91/%E6%9C%80%E5%A4%A7%E8%BF%9E%E6%8E%A5%E6%B5%8B%E8%AF%95/" title="最大连接测试">最大连接测试</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-06-23T15:09:52.000Z" title="发表于 2021-06-23 15:09:52">2021-06-23</time></span></div><div class="content">Java 创建 Socket 连接一台内存在 8G 左右的服务器，可以同时维护多少连接？


连接是内存中的状态对象，从理论上分析，连接本身不太占用内存。不同语言连接对象大小不等，但是通常很小。我们可以写个 Java 程序测试一下

Server 端
12345678910111213141516public class ServerDemo &#123;    public static void main(String[] args) throws IOException &#123;        var serverSocket = new ServerSocket();        // 3001 端口         var address = new InetSocketAddress(3001);        serverSocket.bind(address);        var list = new LinkedList&lt;&gt;();        while (true)&#123;           // 监听连接            var ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2021/06/21/%E8%AE%A1%E7%BD%91/TCP%E5%92%8CUDP/" title="TCP 和 UDP">TCP 和 UDP</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-06-20T17:00:01.000Z" title="发表于 2021-06-20 17:00:01">2021-06-20</time></span></div><div class="content">
TCP 可靠性 HTTP 协议 1.1 和 2.2
UDP 灵活 HTTP 协议 3.0



UDP 协议UDP 在数据传输，网络控制，音视频，Web 技术UDP (User Datagram Protocol) 目标是在传输层提供直接发送报文(Datagram)的能力

Datagram 是数据传输的最小单位
UDP 协议不会帮助拆分数据，它的目标只有一个，就是发送报文 

为什么不用 IP 协议呢


graph LR;
A[应用层] --&gt; B[传输层] --&gt; C[IP协议层]


传输层 (端口号，每个端口代表不同的应用)
IP 协议 (将数据从主机传输到主机)

UDP 的封包格式
  
    Soure Port(源端口号)
    Destination(目标端口号)
  
  
    Length(消息体长度)
    Checksum(校验和)
  
  
    Data octets。。。(一个一个字节数据)
  



校验和 (Checksum) 机制：校验数据在传输过程中有没有丢失、损坏。是一个普遍需求
简单的校验和程序 checksu ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2021/06/20/%E8%AE%A1%E7%BD%91/TCP-%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3-%E6%B5%81%E9%80%9F%E6%8E%A7%E5%88%B6/" title="TCP-滑动窗口-流速控制">TCP-滑动窗口-流速控制</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-06-20T15:53:20.000Z" title="发表于 2021-06-20 15:53:20">2021-06-20</time></span></div><div class="content">!! 此篇博客内容来自 拉勾教育


作为一个传输层协议，最核心的能力是传输，传输需要保证可靠性，还需要控制流速，这两个核心均由滑动窗口提供


请求/响应模型每一个请求收到响应之后，再发送下一个请求，吞吐量会很低。因为这样的设计，会产生网络的空闲时间，说白了，就是浪费带宽。带宽没有用满，意味着可以同时发送更多的请求，接收更多的响应。

一种改进的方式，就是让发送方有请求就发送出去，而不是等待响应。通过这样的处理方式，发送的数据连在了一起，响应的数据也连在了一起，吞吐量就提升了。

排队（Queuing）在这种情况下，我们通常会考虑排队机制

这样做就需要多个队列，我们要将未发送的数据从队列中取出，加入发送中的队列。然后再将发送中的数据，收到 ACK 的部分取出，放入已接收的队列。而发送中的封包，何时收到 ACK 是一件不确定的事情，这样使用队列似乎也有一定的问题。
滑动窗口（Sliding Window）

深绿色代表已经收到 ACK 的段
浅绿色代表发送了，但是没有收到 ACK 的段
白色代表没有发送的段
紫色代表暂时不能发送的段

这个时候滑动窗口可以向右滑动，如下图所示：

重 ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/#content-inner">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/#content-inner">6</a><a class="extend next" rel="next" href="/page/3/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="https://q1.qlogo.cn/g?b=qq&amp;s=100&amp;nk=2621197736" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">殇 花</div><div class="author-info__description">殇花的博客</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">52</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">16</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/shanghua521"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/shanghua521" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:shanghua714@gmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">殇花的小博客</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2021/07/13/%E8%AE%A1%E7%BD%91/SYN%E6%8B%92%E7%BB%9D%E6%94%BB%E5%87%BB/" title="SYN 拒绝攻击"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SYN 拒绝攻击"/></a><div class="content"><a class="title" href="/2021/07/13/%E8%AE%A1%E7%BD%91/SYN%E6%8B%92%E7%BB%9D%E6%94%BB%E5%87%BB/" title="SYN 拒绝攻击">SYN 拒绝攻击</a><time datetime="2021-07-12T16:20:20.000Z" title="发表于 2021-07-12 16:20:20">2021-07-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/07/12/%E8%AE%A1%E7%BD%91/HTTPS%E5%8D%8F%E8%AE%AE/" title="HTTPS 协议"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="HTTPS 协议"/></a><div class="content"><a class="title" href="/2021/07/12/%E8%AE%A1%E7%BD%91/HTTPS%E5%8D%8F%E8%AE%AE/" title="HTTPS 协议">HTTPS 协议</a><time datetime="2021-07-12T13:08:19.000Z" title="发表于 2021-07-12 13:08:19">2021-07-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/07/12/%E8%AE%A1%E7%BD%91/%E5%AF%B9%E7%A7%B0%E4%B8%8E%E9%9D%9E%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86/" title="对称与非对称加密"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="对称与非对称加密"/></a><div class="content"><a class="title" href="/2021/07/12/%E8%AE%A1%E7%BD%91/%E5%AF%B9%E7%A7%B0%E4%B8%8E%E9%9D%9E%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86/" title="对称与非对称加密">对称与非对称加密</a><time datetime="2021-07-11T17:59:49.000Z" title="发表于 2021-07-11 17:59:49">2021-07-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/07/08/%E8%AE%A1%E7%BD%91/%E6%B5%81%E5%AA%92%E4%BD%93%E6%8A%80%E6%9C%AF/" title="流媒体技术"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="流媒体技术"/></a><div class="content"><a class="title" href="/2021/07/08/%E8%AE%A1%E7%BD%91/%E6%B5%81%E5%AA%92%E4%BD%93%E6%8A%80%E6%9C%AF/" title="流媒体技术">流媒体技术</a><time datetime="2021-07-08T11:02:48.000Z" title="发表于 2021-07-08 11:02:48">2021-07-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/07/08/%E8%AE%A1%E7%BD%91/%E7%88%AC%E8%99%AB%E5%92%8C%E5%8F%8D%E7%88%AC%E8%99%AB/" title="爬虫和反爬虫"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="爬虫和反爬虫"/></a><div class="content"><a class="title" href="/2021/07/08/%E8%AE%A1%E7%BD%91/%E7%88%AC%E8%99%AB%E5%92%8C%E5%8F%8D%E7%88%AC%E8%99%AB/" title="爬虫和反爬虫">爬虫和反爬虫</a><time datetime="2021-07-08T11:02:48.000Z" title="发表于 2021-07-08 11:02:48">2021-07-08</time></div></div></div></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/git/" style="font-size: 1.15em; color: rgb(191, 25, 141)">git</a><a href="/tags/IDEA/" style="font-size: 1.15em; color: rgb(66, 25, 118)">IDEA</a><a href="/tags/Java/" style="font-size: 1.35em; color: rgb(109, 1, 170)">Java</a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 1.15em; color: rgb(157, 174, 49)">算法</a><a href="/tags/Json/" style="font-size: 1.15em; color: rgb(95, 53, 17)">Json</a><a href="/tags/Linux/" style="font-size: 1.25em; color: rgb(131, 123, 117)">Linux</a><a href="/tags/Ubuntu/" style="font-size: 1.25em; color: rgb(90, 46, 1)">Ubuntu</a><a href="/tags/Vim/" style="font-size: 1.15em; color: rgb(65, 115, 94)">Vim</a><a href="/tags/Python/" style="font-size: 1.15em; color: rgb(72, 180, 62)">Python</a><a href="/tags/Maven/" style="font-size: 1.25em; color: rgb(65, 21, 59)">Maven</a><a href="/tags/Mybatis/" style="font-size: 1.25em; color: rgb(145, 5, 41)">Mybatis</a><a href="/tags/MongoDB/" style="font-size: 1.15em; color: rgb(187, 103, 140)">MongoDB</a><a href="/tags/elasticsearch/" style="font-size: 1.15em; color: rgb(93, 178, 21)">elasticsearch</a><a href="/tags/k8/" style="font-size: 1.15em; color: rgb(16, 144, 162)">k8</a><a href="/tags/%E8%AE%A1%E7%BD%91/" style="font-size: 1.45em; color: rgb(32, 2, 111)">计网</a><a href="/tags/%E5%8A%A0%E5%AF%86/" style="font-size: 1.25em; color: rgb(11, 75, 24)">加密</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/07/"><span class="card-archive-list-date">七月 2021</span><span class="card-archive-list-count">11</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/06/"><span class="card-archive-list-date">六月 2021</span><span class="card-archive-list-count">11</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/07/"><span class="card-archive-list-date">七月 2020</span><span class="card-archive-list-count">6</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/05/"><span class="card-archive-list-date">五月 2020</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/04/"><span class="card-archive-list-date">四月 2020</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/03/"><span class="card-archive-list-date">三月 2020</span><span class="card-archive-list-count">13</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2019/09/"><span class="card-archive-list-date">九月 2019</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2019/08/"><span class="card-archive-list-date">八月 2019</span><span class="card-archive-list-count">6</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">52</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2019-05-31T16:00:00.000Z"></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">47k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2021-07-12T08:56:50.371Z"></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2018 - 2021 By 殇 花</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="algolia-search"><div class="search-dialog"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/algolia.js"></script><div class="js-pjax"><script>function subtitleType () {
  if (true) { 
    var typed = new Typed("#subtitle", {
      strings: "道生一&#44;一生二&#44;二生三&#44;三生万物".split(","),
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50
    })
  } else {
    document.getElementById("subtitle").innerHTML = '道'
  }
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}</script><script>if (document.getElementsByClassName('mermaid').length) {
  if (window.mermaidJsLoad) mermaid.init()
  else {
    getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(() => {
      window.mermaidJsLoad = true
      mermaid.initialize({
        theme: 'default',
      })
      true && mermaid.init()
    })
  }
}</script></div><script src="/js/demo.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  '#config-diff',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener toc scroll 
  window.removeEventListener('scroll', window.tocScrollFn)

  typeof preloader === 'object' && preloader.initLoading()
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>